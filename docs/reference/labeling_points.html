<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Labeling Function for Mosaic Displays Using Points — labeling_points • vcdExtra</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Labeling Function for Mosaic Displays Using Points — labeling_points"><meta name="description" content='This labeling function for use with strucplot displays,
such as mosaic, draws
random points within each cell of a mosaic plot, where the number of points
represents observed or expected frequencies. This creates a "dot-density"
visualization that provides a direct visual representation of cell frequencies.'><meta property="og:description" content='This labeling function for use with strucplot displays,
such as mosaic, draws
random points within each cell of a mosaic plot, where the number of points
represents observed or expected frequencies. This creates a "dot-density"
visualization that provides a direct visual representation of cell frequencies.'><meta property="og:image" content="https://friendly.github.io/vcdExtra/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vcdExtra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a1-creating.html">1. Creating and manipulating frequency tables</a></li>
    <li><a class="dropdown-item" href="../articles/a2-tests.html">2. Tests of Independence</a></li>
    <li><a class="dropdown-item" href="../articles/a3-loglinear.html">3. Loglinear Models</a></li>
    <li><a class="dropdown-item" href="../articles/a4-mosaics.html">4. Mosaic plots</a></li>
    <li><a class="dropdown-item" href="../articles/a5-demo-housing.html">5. Demo - Housing Data</a></li>
    <li><a class="dropdown-item" href="../articles/a6-mobility.html">6. Mobility tables</a></li>
    <li><a class="dropdown-item" href="../articles/a7-continuous.html">7. Continuous predictors</a></li>
    <li><a class="dropdown-item" href="../articles/datasets.html">Datasets for categorical data analysis</a></li>
    <li><a class="dropdown-item" href="../articles/tidyCats.html">tidyCat: Tidy Methods For Categorical Data Analysis</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/friendly/vcdExtra/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Labeling Function for Mosaic Displays Using Points</h1>
      <small class="dont-index">Source: <a href="https://github.com/friendly/vcdExtra/blob/master/R/labeling_points.R" class="external-link"><code>R/labeling_points.R</code></a></small>
      <div class="d-none name"><code>labeling_points.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This labeling function for use with <code><a href="https://rdrr.io/pkg/vcd/man/strucplot.html" class="external-link">strucplot</a></code> displays,
such as <code><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></code>, draws
random points within each cell of a mosaic plot, where the number of points
represents observed or expected frequencies. This creates a "dot-density"
visualization that provides a direct visual representation of cell frequencies.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">labeling_points</span><span class="op">(</span></span>
<span>  labels <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  varnames <span class="op">=</span> <span class="va">labels</span>,</span>
<span>  value_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"observed"</span>, <span class="st">"expected"</span><span class="op">)</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  pch <span class="op">=</span> <span class="fl">19</span>,</span>
<span>  size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">"char"</span><span class="op">)</span>,</span>
<span>  gp_points <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"black"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span>,</span>
<span>  margin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="st">"npc"</span><span class="op">)</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  jitter <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  clip <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-labels">labels<a class="anchor" aria-label="anchor" href="#arg-labels"></a></dt>
<dd><p>Logical vector or scalar indicating whether labels should be
drawn for the table dimensions via <code><a href="https://rdrr.io/pkg/vcd/man/labeling_border.html" class="external-link">labeling_border</a></code>.
Defaults to <code>TRUE</code>.</p></dd>


<dt id="arg-varnames">varnames<a class="anchor" aria-label="anchor" href="#arg-varnames"></a></dt>
<dd><p>Logical vector or scalar indicating whether variable names
should be drawn. Defaults to <code>labels</code>.</p></dd>


<dt id="arg-value-type">value_type<a class="anchor" aria-label="anchor" href="#arg-value-type"></a></dt>
<dd><p>Character string specifying whether to display
<code>"observed"</code> or <code>"expected"</code> frequencies as points.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>Numeric scaling factor. The number of points drawn equals
<code>round(frequency / scale)</code>. Use larger values for tables with
large counts.</p></dd>


<dt id="arg-pch">pch<a class="anchor" aria-label="anchor" href="#arg-pch"></a></dt>
<dd><p>Point character (plotting symbol). Default is 19 (filled circle).</p></dd>


<dt id="arg-size">size<a class="anchor" aria-label="anchor" href="#arg-size"></a></dt>
<dd><p>Point size as a <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></code> object.
Default is <code>unit(0.5, "char")</code>.</p></dd>


<dt id="arg-gp-points">gp_points<a class="anchor" aria-label="anchor" href="#arg-gp-points"></a></dt>
<dd><p>A <code><a href="https://rdrr.io/r/grid/gpar.html" class="external-link">gpar</a></code> object controlling point appearance
(color, alpha, etc.), for example: <code>gp_points = gpar(col = "red")</code>.</p></dd>


<dt id="arg-margin">margin<a class="anchor" aria-label="anchor" href="#arg-margin"></a></dt>
<dd><p>Margin inside cells as a <code><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></code> object.
Points are drawn within this inset area. Default is <code>unit(0.05, "npc")</code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Optional integer seed for reproducible point placement across several similar plots.
If <code>NULL</code> (default), no seed is set.</p></dd>


<dt id="arg-jitter">jitter<a class="anchor" aria-label="anchor" href="#arg-jitter"></a></dt>
<dd><p>Numeric jitter amount (0-1) for point placement.
Default is 1 (full random). Values &lt; 1 create more regular patterns.</p></dd>


<dt id="arg-clip">clip<a class="anchor" aria-label="anchor" href="#arg-clip"></a></dt>
<dd><p>Logical indicating whether to clip points at cell boundaries.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code><a href="https://rdrr.io/pkg/vcd/man/labeling_border.html" class="external-link">labeling_border</a></code>
for axis labels.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A function of class <code>"grapcon_generator"</code> suitable for use
as the <code>labeling</code> argument in <code><a href="https://rdrr.io/pkg/vcd/man/strucplot.html" class="external-link">strucplot</a></code> and
related functions like <code><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function follows the "grapcon_generator" pattern used by vcd labeling
functions. It returns a function that can be passed to the <code>labeling</code>
argument of <code><a href="https://rdrr.io/pkg/vcd/man/strucplot.html" class="external-link">strucplot</a></code>, <code><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></code>, or
related functions as the argument <code>labeling = labeling_poionts(...)</code>.</p>
<p>The visualization is inspired by the conceptual model described in
Friendly (1995), where cell frequencies are represented as physical
counts of objects. Under independence, point density would be uniform
across cells (adjusted for marginals), so departures from independence
become visible as density variations.</p>
<p>This approach is related to sieve diagrams (<code><a href="https://rdrr.io/pkg/vcd/man/sieve.html" class="external-link">sieve</a></code>),
which also use density to represent association.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Friendly, M. (1995). Conceptual and Visual Models for Categorical Data.
<em>The American Statistician</em>, <strong>49</strong>, 153-160.
<a href="https://doi.org/10.1080/00031305.1995.10476131" class="external-link">doi:10.1080/00031305.1995.10476131</a></p>
<p>Friendly, M. (1997). Conceptual Models for Visualizing Contingency Table Data.
In M. Greenacre &amp; J. Blasius (Eds.), <em>Visualization of Categorical Data</em> (pp. 17–35).
Academic Press. <a href="https://www.datavis.ca/papers/koln/kolnpapr.pdf" class="external-link">https://www.datavis.ca/papers/koln/kolnpapr.pdf</a></p>
<p>Meyer, D., Zeileis, A., and Hornik, K. (2006).
The Strucplot Framework: Visualizing Multi-way Contingency Tables with vcd.
<em>Journal of Statistical Software</em>, <strong>17</strong>(3), 1-48.
<a href="https://doi.org/10.18637/jss.v017.i03" class="external-link">doi:10.18637/jss.v017.i03</a></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/pkg/vcd/man/labeling_cells_list.html" class="external-link">labeling_cells</a></code>, <code><a href="https://rdrr.io/pkg/vcd/man/labeling_border.html" class="external-link">labeling_border</a></code>,
<code><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></code>, <code><a href="https://rdrr.io/pkg/vcd/man/sieve.html" class="external-link">sieve</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">vcd</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 2-way table of Hair and Eye color</span></span></span>
<span class="r-in"><span><span class="va">HairEye</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/marginSums.html" class="external-link">margin.table</a></span><span class="op">(</span><span class="va">HairEyeColor</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Basic usage - observed frequencies as points</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="va">HairEye</span>,</span></span>
<span class="r-in"><span>       labeling <span class="op">=</span> <span class="fu">labeling_points</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labeling_points-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Show expected frequencies instead of observed</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="va">HairEye</span>,</span></span>
<span class="r-in"><span>       labeling <span class="op">=</span> <span class="fu">labeling_points</span><span class="op">(</span></span></span>
<span class="r-in"><span>                     value_type <span class="op">=</span> <span class="st">"expected"</span>,</span></span>
<span class="r-in"><span>                     scale <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>                     seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span>      <span class="op">)</span></span></span>
<span class="r-plt img"><img src="labeling_points-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine with residual shading</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="va">HairEye</span>,</span></span>
<span class="r-in"><span>       shade <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>       labeling <span class="op">=</span> <span class="fu">labeling_points</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labeling_points-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Make tiles show expected frequencies, show points for observed frequencies</span></span></span>
<span class="r-in"><span><span class="co"># Reproduces: Fig 6 in Friendly (1995)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/vcd/man/mosaic.html" class="external-link">mosaic</a></span><span class="op">(</span><span class="va">HairEye</span>,</span></span>
<span class="r-in"><span>       type <span class="op">=</span> <span class="st">"expected"</span>,</span></span>
<span class="r-in"><span>       shade <span class="op">=</span> <span class="cn">TRUE</span>, legend <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>       labeling <span class="op">=</span> <span class="fu">labeling_points</span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">2</span>, seed <span class="op">=</span> <span class="fl">42</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="labeling_points-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Friendly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

